"use strict";window.tsfem_worker=function(){const a=new Map,b=new Map,c=(a,c)=>{"busy"===c?b.set(a,!0):b.set(a,!1)},d=a=>c(a,"clear"),e=b=>a.get(b),f=a=>{e(a)?.terminate(),d(a)};return Object.assign({load:()=>{}},{occupyWorker:a=>c(a,"busy"),freeWorker:d,isWorkerBusy:a=>!!b.get(a),spawnWorker:(b,c)=>a.set(c,new Worker(b)),getWorker:e,stopWorker:f,despawnWorker:b=>{f(b),a.delete(b)},tellWorker:(a,b)=>new Promise((c,d)=>{const f=e(a);return f?void(f.onmessage=a=>"error"in a.data?d(a.data.error):c(a.data),f.onerror=a=>d(a),f.postMessage({id:a,data:b})):d("No worker available.")}),assignWorker:(a,b,c,d)=>{const f=e(a);return f?void(f.onmessage=c,f.onerror=d,f.postMessage({id:a,data:b})):d("No worker available.")}})}(),window.tsfem_worker.load();
